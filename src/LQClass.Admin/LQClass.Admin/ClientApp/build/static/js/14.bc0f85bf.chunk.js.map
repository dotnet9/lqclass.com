{"version":3,"sources":["pages/frameworkrole/store/index.ts","pages/frameworkrole/views/models.tsx","pages/frameworkrole/views/forms.tsx","pages/frameworkrole/views/action.tsx","pages/frameworkrole/views/other.tsx","pages/frameworkrole/views/search.tsx","pages/frameworkrole/views/table.tsx","pages/frameworkrole/index.tsx"],"names":["BindAll","Apis","search","url","method","details","pages","insert","update","updatepage","delete","import","export","exportIds","template","params","this","options","IdKey","Observable","Request","ajax","body","toPromise","res","DataSource","mergeLocales","props","label","id","rules","values","txt","getLocalesValue","formItem","placeholder","getLocalesTemplate","formItemProps","display","rowKey","models","style","marginLeft","defaultValues","Level","Name","AllActions","length","dataSource","addButton","deleteButton","setValues","abcd","value","key","fieId","InsertForm","DialogFormDes","onFormSubmit","Store","onInsert","observer","Models","React","UpdateForm","onUpdate","onLoadData","onDetails","form","getFieldDecorator","hidden","JurisdictionForm","onUpdatePages","onPages","layout","InfoForm","ActionEvents","onImport","PageState","visiblePort","onExport","onExportIds","onDelete","data","onDeleteList","selectedRowKeys","confirm","title","text","onOk","a","onCancel","pageAction","DesError","deletelength","disabled","className","visible","onAuthorizeActions","icon","type","loadData","onClick","overlay","Item","rowAction","showSubmit","onConfirm","DesForm","toJS","searchParams","columnDefs","headerName","field","Action","rowActionCol","width","Component","App","AuthorizeDecorator","PageStore"],"mappings":"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","file":"static/js/14.bc0f85bf.chunk.js","sourcesContent":["import { BindAll } from 'lodash-decorators';\r\nimport DataSource from 'store/dataSource';\r\nimport lodash from 'lodash';\r\n@BindAll()\r\nexport class Store extends DataSource {\r\n    constructor() {\r\n        super({\r\n            // IdKey: \"ID\", 默认 ID\r\n            // Target: \"/api\", 默认 /api\r\n            Apis: {\r\n                search: {\r\n                    url: \"/_frameworkrole/search\",\r\n                    method: \"post\"\r\n                },\r\n                details: {\r\n                    // 支持 嵌套 参数 /user/{ID}/{AAA}/{BBB}\r\n                    url: \"/_frameworkrole/{ID}\",\r\n                    method: \"get\"\r\n                },\r\n                pages: {\r\n                    // 支持 嵌套 参数 /user/{ID}/{AAA}/{BBB}\r\n                    url: \"/_frameworkrole/GetPageActions/{ID}\",\r\n                    method: \"get\"\r\n                },\r\n                insert: {\r\n                    url: \"/_frameworkrole/add\",\r\n                    method: \"post\"\r\n                },\r\n                update: {\r\n                    url: \"/_frameworkrole/edit\",\r\n                    method: \"put\"\r\n                },\r\n                updatepage: {\r\n                    url: \"/_frameworkrole/EditPrivilege\",\r\n                    method: \"put\"\r\n                },\r\n                delete: {\r\n                    url: \"/_frameworkrole/BatchDelete\",\r\n                    method: \"post\"\r\n                },\r\n                import: {\r\n                    url: \"/_frameworkrole/import\",\r\n                    method: \"post\"\r\n                },\r\n                export: {\r\n                    url: \"/_frameworkrole/ExportExcel\",\r\n                    method: \"post\"\r\n                },\r\n                exportIds: {\r\n                    url: \"/_frameworkrole/ExportExcelByIds\",\r\n                    method: \"post\"\r\n                },\r\n                template: {\r\n                    url: \"/_frameworkrole/GetExcelTemplate\",\r\n                    method: \"get\"\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /** 读取权限 */\r\n    async onPages(params) {\r\n        if (lodash.isString(params)) {\r\n            params = lodash.set({}, this.options.IdKey, params);\r\n        }\r\n        const res = await this.Observable.Request.ajax({ ...this.options.Apis.pages, body: params }).toPromise();\r\n        this.DataSource.details = res;\r\n        return res;\r\n    }\r\n\r\n    /** 设置权限 */\r\n    async onUpdatePages(params) {\r\n        if (lodash.isString(params)) {\r\n            params = lodash.set({}, this.options.IdKey, params);\r\n        }\r\n        const res = await this.Observable.Request.ajax({ ...this.options.Apis.updatepage, body: params }).toPromise();\r\n        this.DataSource.details = res;\r\n        return res;\r\n    }\r\n}\r\nexport default new Store();","import { Input } from 'antd';\r\nimport { FormItem } from 'components/dataView';\r\nimport { WtmCheckbox, WtmEditTable } from 'components/form';\r\nimport lodash from 'lodash';\r\nimport * as React from 'react';\r\nimport { mergeLocales, getLocalesValue, getLocalesTemplate } from 'locale';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nmergeLocales({\r\n    \"zh-CN\": {\r\n        'frameworkrole.RoleCode': '角色编码',\r\n        'frameworkrole.RoleName': '角色名称',\r\n        'frameworkrole.RoleRemark': '备注',\r\n        'frameworkrole.Page': '页面',\r\n        'frameworkrole.Action': '动作',\r\n    },\r\n    \"en-US\": {\r\n        'frameworkrole.RoleCode': 'RoleCode',\r\n        'frameworkrole.RoleName': 'RoleName',\r\n        'frameworkrole.RoleRemark': 'Remark',\r\n        'frameworkrole.Page': 'Page',\r\n        'frameworkrole.Action': 'Action(s)',\r\n   }\r\n});\r\n\r\n/**\r\n * label  标识\r\n * rules   校验规则，参考下方文档  https://ant.design/components/form-cn/#components-form-demo-validate-other\r\n * formItem  表单组件\r\n */\r\nexport default {\r\n    /**\r\n     * 表单模型 \r\n     * @param props \r\n     */\r\n    editModels(props?): WTM.FormItem {\r\n        return {\r\n            /** 角色编号 */\r\n            \"Entity.RoleCode\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleCode' />,\r\n                rules: [{ \"required\": true, \"message\": <FormattedMessage id='tips.error.required' values={{ txt: getLocalesValue('frameworkrole.RoleCode') }} /> }],\r\n                formItem: <Input placeholder={getLocalesTemplate('tips.placeholder.input', { txt: getLocalesValue('frameworkrole.RoleCode') })} />\r\n            },\r\n            /** 角色名称 */\r\n            \"Entity.RoleName\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleName' />,\r\n                rules: [{ \"required\": true, \"message\": <FormattedMessage id='tips.error.required' values={{ txt: getLocalesValue('frameworkrole.RoleName') }} /> }],\r\n                formItem: <Input placeholder={getLocalesTemplate('tips.placeholder.input', { txt: getLocalesValue('frameworkrole.RoleName') })} />\r\n            },\r\n            /** 备注 */\r\n            \"Entity.RoleRemark\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleRemark' />,\r\n                rules: [],\r\n                formItem: <Input placeholder={getLocalesTemplate('tips.placeholder.input', { txt: getLocalesValue('frameworkrole.RoleRemark') })} />\r\n            }\r\n\r\n        }\r\n    },\r\n    /**\r\n     * 搜索 模型 \r\n     * @param props \r\n     */\r\n    searchModels(props?): WTM.FormItem {\r\n        return {\r\n            /** 角色编号 */\r\n            \"RoleCode\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleCode' />,\r\n                rules: [],\r\n                formItem: <Input placeholder=\"\" />\r\n            },\r\n            /** 角色名称 */\r\n            \"RoleName\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleName' />,\r\n                rules: [],\r\n                formItem: <Input placeholder=\"\" />\r\n            },\r\n\r\n        }\r\n    },\r\n\r\n    pageModels(props?): WTM.FormItem {\r\n        return {\r\n            /** 角色编号 */\r\n            \"Entity.RoleCode\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleCode' />,\r\n                rules: [{ \"required\": true, \"message\": <FormattedMessage id='tips.error.required' values={{ txt: getLocalesValue('frameworkrole.RoleCode') }} /> }],\r\n                formItem: <Input placeholder={getLocalesTemplate('tips.placeholder.input', { txt: getLocalesValue('frameworkrole.RoleCode') })} />,\r\n                formItemProps: { display: true }\r\n            },\r\n            /** 角色名称 */\r\n            \"Entity.RoleName\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleName' />,\r\n                rules: [{ \"required\": true, \"message\": <FormattedMessage id='tips.error.required' values={{ txt: getLocalesValue('frameworkrole.RoleName') }} /> }],\r\n                formItem: <Input placeholder={getLocalesTemplate('tips.placeholder.input', { txt: getLocalesValue('frameworkrole.RoleName') })} />,\r\n                formItemProps: { display: true }\r\n            },\r\n            /** 备注 */\r\n            \"Pages\": {\r\n                label: <FormattedMessage id='frameworkrole.RoleRemark' />,\r\n                rules: [],\r\n                formItem: (props) => {\r\n                    console.log(props)\r\n                    return <WtmEditTable\r\n                        rowKey=\"ID\"\r\n                        models={{\r\n                            \"Name\": {\r\n                                label: <FormattedMessage id='frameworkrole.Page' />,\r\n                                rules: [],\r\n                                formItem: (props) => {\r\n                                    var m = props.defaultValues.Level * 20;\r\n                                    const style = {\r\n                                        marginLeft: m + 'px'\r\n                                    };\r\n                                    return <span style={style}>{props.defaultValues.Name}</span>\r\n                                }\r\n                            },\r\n                            \"Actions\": {\r\n                                label: <FormattedMessage id='frameworkrole.Action' />,\r\n                                rules: [],\r\n                                formItem: (props) => {\r\n                                    if (props.defaultValues.AllActions == null || props.defaultValues.AllActions.length == 0) {\r\n                                        return <span></span>;\r\n                                    }\r\n                                    else {\r\n                                        return <WtmCheckbox placeholder={getLocalesTemplate('tips.placeholder.choose', { txt: getLocalesValue('frameworkrole.Action') })}\r\n                                            dataSource={props.defaultValues.AllActions}\r\n                                        />\r\n                                    }\r\n                                }\r\n                            }\r\n                        }}\r\n                        addButton={false}\r\n                        deleteButton={false}\r\n                        setValues={{ abcd: 1234 }}\r\n                    />\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 渲染 模型\r\n     */\r\n    renderModels(props?) {\r\n        return lodash.map(props.models, (value, key) => {\r\n            return <FormItem {...props} fieId={key} key={key} />\r\n        })\r\n    }\r\n}\r\n","import { Col } from 'antd';\r\nimport { DialogForm, DialogFormDes, DialogFormSubmit, FormItem, InfoShellLayout, DialogLoadData, } from 'components/dataView';\r\nimport { DesError } from 'components/decorators'; //错误\r\nimport lodash from 'lodash';\r\nimport { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport Store from '../store'; //页面状态\r\nimport Models from './models'; //模型\r\n\r\n@DialogFormDes({\r\n    onFormSubmit(values) {\r\n        return Store.onInsert(values)\r\n    }\r\n})\r\n@observer\r\nexport class InsertForm extends React.Component<any, any> {\r\n    models = Models.editModels(this.props);\r\n    render() {\r\n        const props = {\r\n            ...this.props,\r\n            models: this.models,\r\n        }\r\n        return <InfoShellLayout>\r\n            <FormItem {...props} fieId=\"Entity.RoleCode\" />\r\n            <FormItem {...props} fieId=\"Entity.RoleName\" />\r\n            <FormItem {...props} fieId=\"Entity.RoleRemark\" />\r\n\r\n        </InfoShellLayout>\r\n    }\r\n}\r\n/**\r\n * 修改表单\r\n */\r\n@DialogFormDes({\r\n    onFormSubmit(values) {\r\n        return Store.onUpdate(values)\r\n    },\r\n    onLoadData(values, props) {\r\n        return Store.onDetails(values)\r\n    }\r\n})\r\n@observer\r\nexport class UpdateForm extends React.Component<WTM.FormProps, any> {\r\n    // 创建模型\r\n    models = Models.editModels(this.props);\r\n    render() {\r\n        const { form } = this.props;\r\n        const { getFieldDecorator } = form;\r\n        const props = {\r\n            ...this.props,\r\n            models: this.models,\r\n        }\r\n        return <InfoShellLayout>\r\n            <FormItem {...props} fieId=\"Entity.ID\" hidden />\r\n            <FormItem {...props} fieId=\"Entity.RoleCode\" display/>\r\n            <FormItem {...props} fieId=\"Entity.RoleName\" />\r\n            <FormItem {...props} fieId=\"Entity.RoleRemark\" />\r\n        </InfoShellLayout>\r\n    }\r\n}\r\n/**\r\n * 权限\r\n */\r\n@DialogFormDes({\r\n    onFormSubmit(values) {\r\n        console.log(values);\r\n        return Store.onUpdatePages(values)\r\n    },\r\n    onLoadData(values, props) {\r\n        return Store.onPages(values)\r\n    }\r\n})\r\n@observer\r\nexport class JurisdictionForm extends React.Component<WTM.FormProps, any> {\r\n    // 创建模型\r\n    models = Models.pageModels(this.props);\r\n    render() {\r\n        const { form } = this.props;\r\n        const { getFieldDecorator } = form;\r\n        const props = {\r\n            ...this.props,\r\n            models: this.models,\r\n        }\r\n        return <InfoShellLayout>\r\n            <FormItem {...props} fieId=\"Entity.ID\" hidden />\r\n            <FormItem {...props} fieId=\"Entity.RoleCode\" display />\r\n            <FormItem {...props} fieId=\"Entity.RoleName\" display />\r\n            <FormItem {...props} fieId=\"Pages\" layout=\"row\" />\r\n        </InfoShellLayout>\r\n    }\r\n}\r\n/**\r\n * 详情\r\n */\r\n@DialogFormDes({\r\n    onLoadData(values, props) {\r\n        return Store.onDetails(values)\r\n    }\r\n})\r\n@observer\r\nexport class InfoForm extends React.Component<WTM.FormProps, any> {\r\n    models = Models.editModels(this.props);\r\n    render() {\r\n        const props = {\r\n            ...this.props,\r\n            models: this.models,\r\n            display: true,\r\n        }\r\n        return <InfoShellLayout >\r\n            <FormItem {...props} fieId=\"Entity.RoleCode\" />\r\n            <FormItem {...props} fieId=\"Entity.RoleName\" />\r\n            <FormItem {...props} fieId=\"Entity.RoleRemark\" />\r\n        </InfoShellLayout>\r\n    }\r\n}\r\n","import { Button, Divider, Dropdown, Menu, Modal, Popconfirm, Row } from 'antd';\r\nimport { DialogForm, Visible } from 'components/dataView';\r\nimport { DesError } from 'components/decorators';\r\nimport lodash from 'lodash';\r\nimport { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport { onAuthorizeActions } from 'store/system/authorize';\r\nimport Store from '../store';\r\nimport { InfoForm, InsertForm, UpdateForm, JurisdictionForm } from './forms';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { getLocalesTemplate } from 'locale';\r\n/**\r\n * 动作事件\r\n */\r\nexport const ActionEvents = {\r\n    /**\r\n     * 导入\r\n     */\r\n    onImport() {\r\n        Store.PageState.visiblePort = true;\r\n    },\r\n    /**\r\n     * 导出\r\n     */\r\n    onExport() {\r\n        Store.onExport()\r\n    },\r\n    /**\r\n     * 批量导出\r\n     */\r\n    onExportIds() {\r\n        Store.onExportIds()\r\n    },\r\n    /**\r\n     * 删除\r\n     * @param data \r\n     */\r\n    onDelete(data) {\r\n        Store.onDelete(data)\r\n    },\r\n    /**\r\n    * 删除\r\n    */\r\n    onDeleteList() {\r\n        const length = Store.DataSource.selectedRowKeys.length\r\n        Modal.confirm({\r\n            title: getLocalesTemplate('action.deleteConfirm', { text: length }),\r\n            onOk: async () => {\r\n                Store.onDelete(Store.DataSource.selectedRowKeys)\r\n            },\r\n            onCancel() { },\r\n        });\r\n    },\r\n}\r\n/**\r\n * 表格 所有 动作\r\n */\r\n@DesError\r\n@observer\r\nclass PageAction extends React.Component<any, any> {\r\n    render() {\r\n        const { selectedRowKeys } = Store.DataSource;\r\n        const deletelength = selectedRowKeys.length;\r\n        const disabled = deletelength < 1;\r\n        return (\r\n            <Row className=\"data-view-page-action\">\r\n                <Visible visible={onAuthorizeActions(Store, \"insert\")}>\r\n                    <DialogForm\r\n                        title={<FormattedMessage id=\"action.insert\" />}\r\n                        icon=\"plus\"\r\n                    >\r\n                        <InsertForm />\r\n                    </DialogForm>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"update\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <DialogForm\r\n                        title={<FormattedMessage id=\"action.update\" />}\r\n                        icon=\"edit\"\r\n                        disabled={deletelength != 1}\r\n                    >\r\n                        <UpdateForm loadData={() => (lodash.find(selectedRowKeys))} />\r\n                    </DialogForm>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"delete\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <Button icon=\"delete\" onClick={ActionEvents.onDeleteList} disabled={disabled}><FormattedMessage id=\"action.delete\" /></Button>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"import\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <Button icon=\"folder-add\" onClick={ActionEvents.onImport}><FormattedMessage id=\"action.import\" /></Button>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"export\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <Dropdown overlay={<Menu>\r\n                        <Menu.Item>\r\n                            <a onClick={ActionEvents.onExport}><FormattedMessage id=\"action.exportAll\" /></a>\r\n                        </Menu.Item>\r\n                        <Menu.Item disabled={disabled}>\r\n                            <a onClick={ActionEvents.onExportIds}><FormattedMessage id=\"action.exportSelect\" /></a>\r\n                        </Menu.Item>\r\n                    </Menu>}>\r\n                        <Button icon=\"download\" ><FormattedMessage id=\"action.export\" /></Button>\r\n                    </Dropdown>\r\n                </Visible>\r\n\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n/**\r\n * 表格 行 动作\r\n */\r\n@DesError\r\n@observer\r\nclass RowAction extends React.Component<{\r\n    /** 数据详情 */\r\n    data: any;\r\n    [key: string]: any;\r\n}, any> {\r\n    render() {\r\n        const { data } = this.props\r\n        return (\r\n            <Row className=\"data-view-row-action\">\r\n                <Visible visible={onAuthorizeActions(Store, \"details\")}>\r\n                    <DialogForm\r\n                        title={<FormattedMessage id=\"action.info\" />}\r\n                        showSubmit={false}\r\n                        type=\"a\"\r\n                    >\r\n                        <InfoForm loadData={data} />\r\n                    </DialogForm>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"update\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <DialogForm\r\n                        title={<FormattedMessage id=\"action.update\" />}\r\n                        type=\"a\"\r\n                    >\r\n                        <UpdateForm loadData={data} />\r\n                    </DialogForm>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"pages\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <DialogForm\r\n                        title={<FormattedMessage id=\"action.privilege\" />}\r\n                    type=\"a\"\r\n                >\r\n                        <JurisdictionForm loadData={data} />\r\n                    </DialogForm>\r\n                </Visible>\r\n                <Visible visible={onAuthorizeActions(Store, \"delete\")}>\r\n                    <Divider type=\"vertical\" />\r\n                    <Popconfirm title={<FormattedMessage id=\"action.deleteConfirm\" values={{ text: '' }} />} onConfirm={() => { ActionEvents.onDelete(data) }} >\r\n                        <a ><FormattedMessage id=\"action.delete\" /></a>\r\n                    </Popconfirm>\r\n                </Visible>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\nexport default {\r\n    /**\r\n     * 页面动作\r\n     */\r\n    pageAction: PageAction,\r\n    /**\r\n     * 数据行动作\r\n     */\r\n    rowAction: RowAction\r\n}\r\n","import { ImportModal } from 'components/dataView';\r\nimport * as React from 'react';\r\nimport Store from '../store';\r\n\r\n/**\r\n * 其他弹框类组件\r\n */\r\nexport default class extends React.Component<any, any>{\r\n    shouldComponentUpdate() {\r\n        return false\r\n    }\r\n    render() {\r\n        return <React.Fragment key=\"page-other\">\r\n            <ImportModal Store={Store} />\r\n        </React.Fragment>\r\n    }\r\n}","import { FormItem } from 'components/dataView';\r\nimport { DataViewSearch } from 'components/dataView/header/search';\r\nimport { DesForm } from 'components/decorators';\r\nimport { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport Store from '../store';\r\nimport Models from './models'; \r\n\r\n@DesForm\r\n@observer\r\nexport default class extends React.Component<any, any> {\r\n    // 创建模型\r\n    models = Models.searchModels(this.props);\r\n    render() {\r\n        // item 的 props\r\n        const props = {\r\n            ...this.props,\r\n            models: this.models,\r\n            defaultValues: toJS(Store.DataSource.searchParams)\r\n        }\r\n        return <DataViewSearch\r\n            // columnCount={4} 默认全局\r\n            // onReset={() => { }} 覆盖默认方法\r\n            // onSubmit={() => { }} 覆盖默认方法\r\n            Store={Store}\r\n            form={this.props.form}\r\n        >\r\n            {Models.renderModels(props)}\r\n        </DataViewSearch>\r\n    }\r\n}","import { ColDef, ColGroupDef } from 'ag-grid-community';\r\nimport { AgGrid } from 'components/dataView';\r\nimport { mergeLocales } from 'locale';\r\nimport React from 'react';\r\nimport Store from '../store';\r\nimport Action from './action';\r\nmergeLocales({\r\n    \"zh-CN\": {\r\n        'frameworkrole.RoleCode': '角色编号',\r\n        'frameworkrole.RoleName': '角色名称',\r\n        'frameworkrole.RoleRemark': '备注',\r\n    },\r\n    \"en-US\": {\r\n        'frameworkrole.RoleCode': 'RoleCode',\r\n        'frameworkrole.RoleName': 'RoleName',\r\n        'frameworkrole.RoleRemark': 'Remark',\r\n    }\r\n});\r\n// 列配置\r\nconst columnDefs: (ColDef | ColGroupDef)[] = [\r\n    {\r\n        headerName: \"frameworkrole.RoleCode\", field: \"RoleCode\"\r\n    },\r\n    {\r\n        headerName: \"frameworkrole.RoleName\", field: \"RoleName\",\r\n    },\r\n    {\r\n        headerName: \"frameworkrole.RoleRemark\", field: \"RoleRemark\",\r\n    },\r\n]\r\n/**\r\n * 表格\r\n */\r\nexport default class extends React.Component<any, any> {\r\n    render() {\r\n        return <AgGrid\r\n            // 页面状态 \r\n            Store={Store}\r\n            // 列配置\r\n            columnDefs={columnDefs}\r\n            // 行操作 \r\n            rowAction={Action.rowAction}\r\n            // 行操作 col props 同 columnDefs配置相同\r\n            rowActionCol={{ width: 300 }}\r\n        // frameworkComponents={{\r\n        // }}\r\n        />\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { AuthorizeDecorator } from 'store/system/authorize';\r\nimport Store from './store';\r\nimport Action from './views/action';\r\nimport Other from './views/other';\r\nimport Search from './views/search';\r\nimport Table from './views/table';\r\n/**\r\n * 页面入口\r\n *  Action：页面动作\r\n *  Details：详情信息，添加，编辑，详情。\r\n *  Other：其他部件，导入导出\r\n *  Search：搜索参数\r\n *  Table：表格\r\n */\r\n@AuthorizeDecorator({ PageStore: Store })\r\nexport default class App extends React.Component<any, any> {\r\n  render() {\r\n    return (\r\n        <div className=\"app-page-frameworkrole\" key=\"app-page-frameworkrole\">\r\n        <Search {...this.props} />\r\n        <Action.pageAction {...this.props} />\r\n        <Table {...this.props} />\r\n        <Other {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}