(this["webpackJsonpwtm-react"]=this["webpackJsonpwtm-react"]||[]).push([[13],{1413:function(e,t,a){"use strict";a.r(t);var r,i=a(13),l=a(14),n=a(20),c=a(19),o=a(0),s=a.n(o),d=a(487),p=(a(247),a(100)),u=a(32),m=a.n(u),b=a(27),v=a(54),E=a(289),g=a(1430),f=a(64),O=new(Object(E.BindAll)()(r=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this,{Apis:{search:{url:"/_dataprivilege/search",method:"post"},details:{url:"/_dataprivilege/get",method:"get"},insert:{url:"/_dataprivilege/add",method:"post"},update:{url:"/_dataprivilege/edit",method:"put"},delete:{url:"/_dataprivilege/Delete",method:"post"},import:{url:"/_dataprivilege/import",method:"post"},export:{url:"/_dataprivilege/ExportExcel",method:"post"},exportIds:{url:"/_dataprivilege/ExportExcelByIds",method:"post"},template:{url:"/_dataprivilege/GetExcelTemplate",method:"get"}}})).DataSource.searchParams={DpType:"0"},e}return Object(l.a)(a,[{key:"onDetails",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.Observable.Request.ajax(Object(b.a)(Object(b.a)({},this.options.Apis.details),{},{body:t,headers:{"Content-Type":null}})).toPromise();case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.PageState.tableLoading=!0,e.prev=1,e.next=4,this.Observable.onDelete({ModelName:t.TableName,Type:t.DpType,Id:t.TargetId});case 4:return a=e.sent,p.a.success({message:Object(f.d)("tips.success.operation")}),this.DataSource.selectedRowKeys=[],this.onSearch(this.DataSource.searchParams),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(1),this.PageState.tableLoading=!1,p.a.error({message:Object(f.d)("tips.error.operation")});case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}]),a}(g.a))||r),h=(a(672),a(490)),j=(a(288),a(110)),y=(a(291),a(165)),I=(a(290),a(77)),D=(a(108),a(31)),T=a(164),S=a.n(T),x=(a(208),a(87)),N=(a(489),a(292)),C=a(127),w=a(109),A=a(49),k=a(18),U=a.n(k),G=(a(246),a(56)),P=a(83),q=a.n(P),_=a(144),V=a.n(_),R=(a(187),a(117)),F=a(1443),L=a(76),K=a(387);Object(f.e)({"zh-CN":{"dataprivilege.required":"{txt}\u662f\u5fc5\u586b\u9879","dataprivilege.placeholder":"\u8bf7\u9009\u62e9 {zhText}","dataprivilege.DpType":"\u6743\u9650\u7c7b\u578b","dataprivilege.DpType.dataSource.0":"\u7528\u6237\u7ec4\u6743\u9650","dataprivilege.DpType.dataSource.1":"\u7528\u6237\u6743\u9650","dataprivilege.TableName":"\u6743\u9650\u540d\u79f0","dataprivilege.SelectedItemsID":"\u5141\u8bb8\u8bbf\u95ee","dataprivilege.IsAll":"\u5168\u90e8\u6743\u9650","dataprivilege.IsAll.true":"\u662f","dataprivilege.IsAll.false":"\u5426","dataprivilege.UserItCode":"\u7528\u6237Id","dataprivilege.GroupId":"\u7528\u6237\u7ec4"},"en-US":{"dataprivilege.required":"{enText} it's required","dataprivilege.placeholder":"Please choose {enText}","dataprivilege.DpType":"DpType","dataprivilege.DpType.dataSource.0":"User group permissions","dataprivilege.DpType.dataSource.1":"User permissions","dataprivilege.TableName":"TableName","dataprivilege.SelectedItemsID":"Allow access to","dataprivilege.IsAll":"All permissions","dataprivilege.IsAll.true":"true","dataprivilege.IsAll.false":"false","dataprivilege.UserItCode":"UserItCode","dataprivilege.GroupId":"User Group"}});var z,B,J,M,H,Q,W=function(e){return{DpType:{label:o.createElement(K.a,{id:"dataprivilege.DpType"}),rules:[{required:!0,message:o.createElement(K.a,{id:"tips.error.required",values:{txt:Object(f.d)("dataprivilege.DpType")}})}],formItem:o.createElement(F.d,{dataSource:[{Text:o.createElement(K.a,{id:"dataprivilege.DpType.dataSource.0"}),Value:"UserGroup"},{Text:o.createElement(K.a,{id:"dataprivilege.DpType.dataSource.1"}),Value:"User"}]})},"Entity.TableName":{label:o.createElement(K.a,{id:"dataprivilege.TableName"}),rules:[{required:!0,message:o.createElement(K.a,{id:"tips.error.required",values:{txt:Object(f.d)("dataprivilege.TableName")}})}],formItem:o.createElement(F.f,{placeholder:o.createElement(K.a,{id:"tips.placeholder.choose",values:{txt:Object(f.d)("dataprivilege.TableName")}}),dataSource:L.b.cache({url:"/api/_DataPrivilege/GetPrivileges"})})},SelectedItemsID:{label:o.createElement(K.a,{id:"dataprivilege.SelectedItemsID"}),rules:[],formItem:o.createElement(F.f,{placeholder:o.createElement(K.a,{id:"tips.placeholder.choose",values:{txt:Object(f.d)("dataprivilege.SelectedItemsID")}}),mode:"multiple",linkage:["Entity.TableName"],dataSource:function(e){var t=U()(e,"Entity.TableName");return t&&L.b.cache({url:"/api/_DataPrivilege/GetPrivilegeByTableName",body:{table:t}})}})},IsAll:{label:o.createElement(K.a,{id:"dataprivilege.IsAll"}),rules:[{required:!0,message:o.createElement(K.a,{id:"tips.error.required",values:{txt:Object(f.d)("dataprivilege.IsAll")}})}],formItem:o.createElement(F.f,{dataSource:[{Text:o.createElement(K.a,{id:"tips.bool.true"}),Value:!0},{Text:o.createElement(K.a,{id:"tips.bool.false"}),Value:!1}]})},"Entity.UserCode":{label:o.createElement(K.a,{id:"dataprivilege.UserItCode"}),rules:[{required:!0,message:o.createElement(K.a,{id:"tips.error.required",values:{txt:Object(f.d)("dataprivilege.UserItCode")}})}],formItem:o.createElement(R.a,{placeholder:""})},"Entity.GroupCode":{label:o.createElement(K.a,{id:"dataprivilege.GroupId"}),rules:[{required:!0,message:o.createElement(K.a,{id:"tips.error.required",values:{txt:Object(f.d)("dataprivilege.GroupId")}})}],formItem:o.createElement(F.f,{placeholder:o.createElement(K.a,{id:"tips.placeholder.choose",values:{txt:Object(f.d)("dataprivilege.GroupId")}}),dataSource:L.b.cache({url:"/api/_DataPrivilege/GetUserGroups"})})}}},X=function(e){return{TableName:{label:o.createElement(K.a,{id:"dataprivilege.TableName"}),rules:[],formItem:o.createElement(F.f,{placeholder:"",dataSource:L.b.cache({url:"/api/_DataPrivilege/GetPrivileges"})})},DpType:{label:o.createElement(K.a,{id:"dataprivilege.DpType"}),rules:[],formItem:o.createElement(F.d,{dataSource:[{Text:o.createElement(K.a,{id:"dataprivilege.DpType.dataSource.0"}),Value:"0"},{Text:o.createElement(K.a,{id:"dataprivilege.DpType.dataSource.1"}),Value:"1"}]})}}},Y=function(e){return V()(e.models,(function(t,a){return o.createElement(C.d,Object.assign({},e,{fieId:a,key:a}))}))},Z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=q()(e.form.getFieldValue(t)||U()(e.defaultValues,t));return""==r&&(r=q()(a)),r},$=Object(C.c)({onFormSubmit:function(e){return O.onInsert(e)}})(z=Object(A.a)(z=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))).models=W(e.props),e}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(b.a)(Object(b.a)({},this.props),{},{models:this.models}),t="UserGroup"==Z(e,"DpType","UserGroup"),a="true"==Z(e,"IsAll",!0);return o.createElement(C.g,null,o.createElement(C.d,Object.assign({},e,{fieId:"DpType",layout:"row",value:"UserGroup"})),!t&&o.createElement(C.d,Object.assign({},e,{fieId:"Entity.UserCode"})),t&&o.createElement(C.d,Object.assign({},e,{fieId:"Entity.GroupCode"})),o.createElement(G.a,{span:24}),o.createElement(C.d,Object.assign({},e,{fieId:"Entity.TableName"})),o.createElement(C.d,Object.assign({},e,{fieId:"IsAll",value:!0})),o.createElement(C.d,Object.assign({},e,{fieId:"SelectedItemsID",disabled:a})))}}]),a}(o.Component))||z)||z,ee=Object(C.c)({onFormSubmit:function(e){return O.onUpdate(e)},onLoadData:function(e,t){return O.onDetails(e)}})(B=Object(A.a)(B=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))).models=W(e.props),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=Object(b.a)(Object(b.a)({},this.props),{},{models:this.models});e("Entity.ID",{initialValue:U()(this.props.defaultValues,"Entity.ID")});var a="UserGroup"==Z(t,"DpType"),r="true"==Z(t,"IsAll");return o.createElement(C.g,null,o.createElement(C.d,Object.assign({},t,{fieId:"DpType",layout:"row"})),!a&&o.createElement(C.d,Object.assign({},t,{fieId:"Entity.UserCode"})),a&&o.createElement(C.d,Object.assign({},t,{fieId:"Entity.GroupCode"})),o.createElement(G.a,{span:24}),o.createElement(C.d,Object.assign({},t,{fieId:"Entity.TableName"})),o.createElement(C.d,Object.assign({},t,{fieId:"IsAll"})),o.createElement(C.d,Object.assign({},t,{fieId:"SelectedItemsID",disabled:r})))}}]),a}(o.Component))||B)||B,te=Object(C.c)({onLoadData:function(e,t){return O.onDetails(e)}})(J=Object(A.a)(J=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))).models=W(e.props),e}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(b.a)(Object(b.a)({},this.props),{},{models:this.models,display:!0}),t="UserGroup"==Z(e,"DpType"),a="true"==Z(e,"IsAll");return o.createElement(C.g,null,o.createElement(C.d,Object.assign({},e,{fieId:"DpType",layout:"row"})),o.createElement(C.d,Object.assign({},e,{fieId:"Entity.UserCode",hidden:t})),o.createElement(C.d,Object.assign({},e,{fieId:"Entity.GroupCode",hidden:!t})),o.createElement(G.a,{span:24}),o.createElement(C.d,Object.assign({},e,{fieId:"Entity.TableName"})),o.createElement(C.d,Object.assign({},e,{fieId:"IsAll"})),o.createElement(C.d,Object.assign({},e,{fieId:"SelectedActionIDs",disabled:a})))}}]),a}(o.Component))||J)||J,ae={onImport:function(){O.PageState.visiblePort=!0},onExport:function(){O.onExport()},onExportIds:function(){O.onExportIds()},onDelete:function(e){O.onDelete(e)},onDeleteList:function(){var e=O.DataSource.selectedRowKeys.length;N.a.confirm({title:Object(f.c)("action.deleteConfirm",{text:e}),onOk:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.onDelete(O.DataSource.selectedRowKeys);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}})}},re={pageAction:Object(w.a)(M=Object(A.a)(M=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=O.DataSource.selectedRowKeys,t=e.length,a=t<1;return o.createElement(j.a,{className:"data-view-page-action"},o.createElement(C.i,{visible:Object(d.c)(O,"insert")},o.createElement(C.b,{title:o.createElement(K.a,{id:"action.insert"}),icon:"plus"},o.createElement($,null))),o.createElement(C.i,{visible:Object(d.c)(O,"update")},o.createElement(x.a,{type:"vertical"}),o.createElement(C.b,{title:o.createElement(K.a,{id:"action.update"}),icon:"edit",disabled:1!=t},o.createElement(ee,{loadData:function(){return S()(e)}}))),o.createElement(C.i,{visible:Object(d.c)(O,"import")},o.createElement(x.a,{type:"vertical"}),o.createElement(D.a,{icon:"folder-add",onClick:ae.onImport},o.createElement(K.a,{id:"action.import"}))),o.createElement(C.i,{visible:Object(d.c)(O,"export")},o.createElement(x.a,{type:"vertical"}),o.createElement(y.a,{overlay:o.createElement(I.a,null,o.createElement(I.a.Item,null,o.createElement("a",{onClick:ae.onExport},o.createElement(K.a,{id:"action.exportAll"}))),o.createElement(I.a.Item,{disabled:a},o.createElement("a",{onClick:ae.onExportIds},o.createElement(K.a,{id:"action.exportSelect"}))))},o.createElement(D.a,{icon:"download"},o.createElement(K.a,{id:"action.export"})))))}}]),a}(o.Component))||M)||M,rowAction:Object(w.a)(H=Object(A.a)(H=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.data;return o.createElement(j.a,{className:"data-view-row-action"},o.createElement(C.i,{visible:Object(d.c)(O,"details")},o.createElement(C.b,{title:o.createElement(K.a,{id:"action.info"}),showSubmit:!1,type:"a"},o.createElement(te,{loadData:e}))),o.createElement(C.i,{visible:Object(d.c)(O,"update")},o.createElement(x.a,{type:"vertical"}),o.createElement(C.b,{title:o.createElement(K.a,{id:"action.update"}),type:"a"},o.createElement(ee,{loadData:e}))),o.createElement(C.i,{visible:Object(d.c)(O,"delete")},o.createElement(x.a,{type:"vertical"}),o.createElement(h.a,{title:o.createElement(K.a,{id:"action.deleteConfirm",values:{text:""}}),onConfirm:function(){ae.onDelete(e)}},o.createElement("a",null,o.createElement(K.a,{id:"action.delete"})))))}}]),a}(o.Component))||H)||H},ie=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.createElement(o.Fragment,{key:"page-other"},o.createElement(C.e,{Store:O}))}}]),a}(o.Component),le=a(488),ne=a(12),ce=Object(w.b)(Q=Object(A.a)(Q=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))).models=X(e.props),e}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(b.a)(Object(b.a)({},this.props),{},{models:this.models,defaultValues:Object(ne.toJS)(O.DataSource.searchParams)});return o.createElement(le.a,{Store:O,form:this.props.form},Y(e))}}]),a}(o.Component))||Q)||Q;Object(f.e)({"zh-CN":{"dataprivilege.Name":"\u6388\u6743\u5bf9\u8c61","dataprivilege.TableName":"\u6743\u9650\u540d\u79f0","dataprivilege.RelateIDs":"\u6743\u9650"},"en-US":{"dataprivilege.Name":"Name","dataprivilege.TableName":"TableName","dataprivilege.RelateIDs":"Privileges"}});var oe,se=[{headerName:"dataprivilege.Name",field:"Name"},{headerName:"dataprivilege.TableName",field:"PName"},{headerName:"dataprivilege.RelateIDs",field:"RelateIDs"}],de=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(C.a,{Store:O,columnDefs:se,rowAction:re.rowAction})}}]),a}(s.a.Component);a.d(t,"default",(function(){return pe}));var pe=Object(d.a)({PageStore:O})(oe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return o.createElement("div",{className:"app-page-dataprivilege",key:"app-page-dataprivilege"},o.createElement(ce,this.props),o.createElement(re.pageAction,this.props),o.createElement(de,this.props),o.createElement(ie,this.props))}}]),a}(o.Component))||oe}}]);
//# sourceMappingURL=13.f25f4057.chunk.js.map